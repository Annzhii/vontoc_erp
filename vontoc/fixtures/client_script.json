[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 1,
  "modified": "2025-11-10 04:58:46.940118",
  "module": "VONTOC",
  "name": "Send Purchase Order For Approval",
  "script": "frappe.ui.form.on('Purchase Order', {\n\tafter_workflow_action: function(frm) {\n\t\tif (frm.doc.workflow_state === 'Sent For Approval'){\n\t\t    frappe.call({\n                method: \"vontoc.api.purchase_order.sent_po_for_approval\",\n                args: {\n                    docname: frm.doc.name\n                },\n                callback: function(r) {\n                    if (r.message) {\n                        frappe.msgprint(__(r.message));\n                        frm.reload_doc();\n                    }\n                }\n            });\n\t\t}\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Receipt",
  "enabled": 1,
  "modified": "2025-11-13 06:21:15.035289",
  "module": "VONTOC",
  "name": "Send Purchase Receipt",
  "script": "frappe.ui.form.on('Purchase Receipt', {\n    after_workflow_action: function(frm) {\n        if (frm.doc.workflow_state == 'Received') {\n            console.log(frm.doc.name);\n            frappe.call({\n                method: \"vontoc.api.purchase_receipt.confirm_purchase_receipt\",\n                args: {\n                    docname: frm.doc.name\n                },\n                callback: function(r) {\n                    if (r.message) {\n                        frappe.msgprint(__(r.message));\n                    }\n                }\n            });\n        }\n    }\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 1,
  "modified": "2025-11-11 04:47:40.124525",
  "module": "VONTOC",
  "name": "Reject Purchase Order",
  "script": "frappe.ui.form.on('Purchase Order', {\n\tafter_workflow_action: function(frm) {\n\t\tif (frm.doc.workflow_state === 'Rejected'){\n\t\t    frappe.call({\n                method: \"vontoc.api.purchase_order.reject_po\",\n                args: {\n                    docname: frm.doc.name\n                },\n                callback: function(r) {\n                    if (r.message) {\n                        frappe.msgprint(__(r.message));\n                        frm.reload_doc();\n                    }\n                }\n            });\n\t\t}\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Subcontracting Receipt",
  "enabled": 1,
  "modified": "2025-11-13 06:31:46.486617",
  "module": "VONTOC",
  "name": "Send Subcontracting Receipt",
  "script": "frappe.ui.form.on('Subcontracting Receipt', {\n    after_workflow_action: function(frm) {\n        if (frm.doc.workflow_state == 'Received') {\n            frappe.call({\n                method: \"vontoc.api.subcontracting_receipt.send_subcontracting_receipt\",\n                args: {\n                    docname: frm.doc.name,\n                },\n                callback: function(r) {\n                    if (r.message) {\n                        frappe.msgprint(__(r.message));\n                    }\n                }\n            });\n        }\n    }\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "FCRM Settings",
  "enabled": 1,
  "modified": "2025-11-19 07:24:31.384757",
  "module": null,
  "name": "Push CRM Notification",
  "script": "frappe.ui.form.on('FCRM Settings', {\n\trefresh(frm) {\n        frm.add_custom_button('启用CRM通知', () => registerPush(\"crm\"));\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item",
  "enabled": 1,
  "modified": "2025-11-24 05:22:26.470044",
  "module": "VONTOC",
  "name": "Send Item",
  "script": "frappe.ui.form.on('Item', {\n    after_workflow_action: function(frm) {\n        if (frm.doc.workflow_state == 'Sent For Approval') {\n            frappe.call({\n                method: \"vontoc.api.item.send_item_for_approval\",\n                args: {\n                    docname: frm.doc.name,\n                },\n                callback: function(r) {\n                    if (r.message) {\n                        frappe.msgprint(__(r.message));\n                    }\n                }\n            });\n        }\n    }\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item",
  "enabled": 1,
  "modified": "2025-11-24 05:22:37.410477",
  "module": "VONTOC",
  "name": "Approve Item",
  "script": "frappe.ui.form.on('Item', {\n    after_workflow_action: function(frm) {\n        if (frm.doc.workflow_state == 'Enabled') {\n            frappe.call({\n                method: \"vontoc.api.item.approve_item\",\n                args: {\n                    docname: frm.doc.name,\n                },\n                callback: function(r) {\n                    if (r.message) {\n                        frappe.msgprint(__(r.message));\n                    }\n                }\n            });\n        }\n    }\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item",
  "enabled": 1,
  "modified": "2025-11-24 05:28:35.316033",
  "module": "VONTOC",
  "name": "Reject Item",
  "script": "frappe.ui.form.on('Item', {\n    after_workflow_action: function(frm) {\n        if (frm.doc.workflow_state == 'Temporary') {\n            frappe.call({\n                method: \"vontoc.api.item.reject_item\",\n                args: {\n                    docname: frm.doc.name,\n                },\n                callback: function(r) {\n                    if (r.message) {\n                        frappe.msgprint(__(r.message));\n                    }\n                }\n            });\n        }\n    }\n});",
  "view": "Form"
 }
]